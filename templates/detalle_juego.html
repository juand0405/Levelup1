{% extends 'homeUser.html' %}  {# si usas una base común #}

{% block content %}
<div class="game-detail-container">
    <div class="game-header">
        <img src="{{ url_for('static', filename=game.image_url) }}" alt="{{ game.name }}" class="game-detail-image">
        <div class="game-detail-info">
            <h1>{{ game.name }}</h1>
            <p class="game-genre"><strong>Género:</strong> {{ game.genre or 'No especificado' }}</p>
            <p class="game-platform"><strong>Plataforma:</strong> {{ game.platform or 'No especificado' }}</p>
            <p class="game-size"><strong>Tamaño:</strong> {{ game.size }}</p>
            <p class="game-developer"><strong>Desarrollador:</strong> {{ game.developer }}</p>
            <p class="game-date"><strong>Fecha de lanzamiento:</strong> {{ game.release_date }}</p>
            <div class="detail-buttons">
                <a href="{{ url_for('static', filename=game.file_path) }}" class="btn btn-secondary" download>
                    <i class="fas fa-download"></i> Descargar
                </a>
                <a href="{{ url_for('donaciones', game_id=game.id) }}" class="btn donate-btn">
                    <i class="fas fa-hand-holding-usd"></i> Donar
                </a>
            </div>
        </div>
    </div>

    <div class="game-description-section">
        <h2>Descripción</h2>
        <p>{{ game.description }}</p>
    </div>

    <div class="comments-section">
        <h2>Comentarios</h2>
        {% if comentarios %}
            {% for comment in comentarios %}
                <div class="comment-item">
                    <p><strong>{{ comment.user.username }}</strong> dice:</p>
                    <p>{{ comment.content }}</p>
                </div>
            {% endfor %}
        {% else %}
            <p>No hay comentarios aún. ¡Sé el primero en opinar!</p>
        {% endif %}

        <form class="comment-form" method="POST" action="{{ url_for('add_comment') }}">
            <input type="hidden" name="game_id" value="{{ game.id }}">
            <textarea name="content" placeholder="Escribe tu comentario..." required></textarea>
            <button type="submit" class="btn btn-comment">Comentar</button>
        </form>
    </div>
</div>

<style>
.game-detail-container {
    max-width: 900px;
    margin: 40px auto;
    background: #1c1c1c;
    color: #fff;
    padding: 25px;
    border-radius: 12px;
}
.game-header {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}
.game-detail-image {
    width: 300px;
    border-radius: 10px;
}
.game-detail-info {
    flex: 1;
}
.detail-buttons a {
    margin-right: 10px;
}
.game-description-section, .comments-section {
    margin-top: 30px;
}
.comment-item {
    background: #2a2a2a;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 10px;
}
.comment-form textarea {
    width: 100%;
    height: 80px;
    margin-bottom: 10px;
    border-radius: 6px;
    padding: 8px;
}
</style>
{% endblock %}
